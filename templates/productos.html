{% extends "base.html" %}
{% block title %}Productos{% endblock %}

{% block contenido %}
<div class="contenedor">
    <h2>üì¶ Lista de productos</h2>

    <div class="acciones">
        <form method="GET" action="{{ url_for('productos') }}" class="form-busqueda">
            <input type="text" name="q" placeholder="Buscar por nombre o c√≥digo..." value="{{ request.args.get('q', '') }}" class="campo-busqueda">
            <button type="submit" class="boton boton-buscar">üîç Buscar</button>
            <a href="{{ url_for('productos') }}" class="boton boton-limpiar">üîÑ Limpiar</a>
        </form>
        <a href="{{ url_for('nuevo_producto') }}" class="boton boton-nuevo">‚ûï Nuevo producto</a>
    </div>

    {% if productos %}
    <table class="tabla-productos">
        <thead>
            <tr>
                <th>Nombre</th>
                <th>C√≥digo</th>
                <th>Cantidad</th>
                <th>Precio</th>
                <th>Tipo</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for p in productos %}
            <tr>
                <td>{{ p.nombre }}</td>
                <td>{{ p.codigo }}</td>
                <td>{{ p.cantidad }}</td>
                <td>${{ "%.2f"|format(p.precio) }}</td>
                <td>{{ p.tipo }}</td>
                <td>
                    <a href="{{ url_for('editar_producto', codigo=p.codigo) }}" class="boton boton-editar">‚úèÔ∏è Editar</a>

                    <a href="#" class="boton boton-eliminar"
                       onclick="if(confirm('¬øEst√°s seguro de eliminar el producto {{ p.nombre }}?')) { document.getElementById('formEliminar{{ loop.index }}').submit(); } return false;">
                       üóëÔ∏è Eliminar
                    </a>

                    <form id="formEliminar{{ loop.index }}" action="{{ url_for('eliminar_producto', codigo=p.codigo) }}" method="POST" style="display:none;"></form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
        <p class="no-productos">No hay productos registrados.</p>
    {% endif %}
</div>

<style>
.contenedor {
    width: 90%;
    max-width: 900px;
    margin: 30px auto;
    text-align: center;
}

h2 {
    margin-bottom: 20px;
}

.acciones {
    text-align: right;
    margin-bottom: 15px;
}

.form-busqueda {
    display: inline-block;
    margin-right: 10px;
}

.campo-busqueda {
    padding: 6px 10px;
    border-radius: 5px;
    border: 1px solid #ccc;
    width: 220px;
    font-size: 14px;
}

.tabla-productos {
    width: 100%;
    border-collapse: collapse;
    background: #fff;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    border-radius: 10px;
    overflow: hidden;
}

.tabla-productos th {
    background-color: #007bff;
    color: white;
    padding: 10px;
}

.tabla-productos td {
    padding: 10px;
    border-bottom: 1px solid #ddd;
}

.tabla-productos tr:hover {
    background-color: #f2f2f2;
}

.boton {
    text-decoration: none;
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 600;
    margin: 2px;
    display: inline-block;
    transition: all 0.2s ease-in-out;
}

.boton:hover {
    transform: scale(1.05);
}

.boton-nuevo {
    background-color: #28a745;
    color: white;
}

.boton-editar {
    background-color: #ffc107;
    color: #000;
}

.boton-eliminar {
    background-color: #dc3545;
    color: white;
}

.boton-buscar {
    background-color: #007bff;
    color: white;
}

.boton-limpiar {
    background-color: #6c757d;
    color: white;
}

.no-productos {
    margin-top: 20px;
    font-style: italic;
    color: #555;
}
</style>
{% endblock %}
